angular.module("publicroot.gallery",[]).directive("angularGallery",["$timeout","$animate",function(a,b){return{restrict:"AE",replace:!0,scope:{source:"=source"},link:function(c,d,e){switch(c.images=c.source.images,c.config=c.source.config,c.currentIndex=0,c.nextIndex=0,c.img=d.find("img"),c.config.animation){case"slide":c.animationClassNext="slide-left",c.animationClassPrev="slide-right";break;default:c.animationClassNext="fade",c.animationClassPrev="fade"}c.next=function(){c.nextIndex=c.nextIndex==c.images.length-1?0:c.nextIndex+1,a(function(){c.currentIndex=c.currentIndex==c.images.length-1?0:c.currentIndex+1},900),b.addClass(c.img[0],c.animationClassNext).then(function(){b.removeClass(c.img[0],c.animationClassNext)})},c.prev=function(){c.nextIndex=0==c.nextIndex?c.images.length-1:c.nextIndex-1,a(function(){c.currentIndex=0==c.currentIndex?c.images.length-1:c.currentIndex-1},900),b.addClass(c.img[0],c.animationClassPrev).then(function(){b.removeClass(c.img[0],c.animationClassPrev)})},c.$watch("currentIndex",function(){c.currentImage=c.images[c.currentIndex]}),c.$watch("nextIndex",function(){c.nextImage=c.images[c.nextIndex]})},template:'<div class="gallery-container">   <div class="gallery-item">       <img ng-cloak class="current-img" ng-src="{{ currentImage.url }}">       <img ng-cloak class="next-img" ng-src="{{ nextImage.url }}">   </div>   <div class="prev" ng-click="prev()"></div>   <div class="next" ng-click="next()"></div></div>'}}]);